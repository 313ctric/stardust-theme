{% extends "section.html" %}
{% import "macros/events.html" as events %}
{% import "macros/logos.html" as logos %}

{% block header %}
{% set term = get_section(path=resource.ancestors | last) %}
<h1>{{ term.title }}: {{ resource.title | safe }}</h1>
{% endblock %}

{% block get_pages %}
  {{ super() }}
  {% set pages = pages | sort(attribute="date") %}
{% endblock %}


{% block pages %}
<div class="vstack schedule" style="background-color: var(--bs-body-bg, {{ formatters::colour(colour="grey") }}); background-image: url(&quot;{{ get_url(path="assets/bg-particles.png") }}&quot;); background-size: contain; width: 700px" data-bs-theme="dark">
  <style>
    .schedule .dots-uwcs {
      height: 4em;
      margin-top: 1em;
    }
  </style>

  {{ logos::dots_uwcs(letter="white") }}
  <div class="term blue-top pb-5" data-bs-theme="dark">
    <h1 style="margin-top: -0.5em">{{ resource.title | safe }}</h1>
    {{ events::week(w=resource, pages=pages) }}
  </div>
</div>

{% block script %}
<script>
  addEventListener("load", (event) => {
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has("image")) {
      const sch = document.getElementsByClassName("schedule")[0];
      const b = document.getElementsByTagName("body")[0];
      const newsch = b.insertAdjacentElement("afterbegin", sch);
      newsch.width = 700;
      newsch.id = "image";

      while (b.children.length > 1) {
        b.removeChild(b.lastChild);
      }
    }
  })
</script>
{{ events::script() }}
  
<button class="btn btn-secondary" onClick="capture()">Save Image</button>
{% endblock %}

{% endblock %}